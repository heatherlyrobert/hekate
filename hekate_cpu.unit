#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                hekate.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (CPU) verify proc/stat file collection of cpu usage                CPU_detail                                                                                            ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize the system                PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   tPROC *x_proc = NULL;                                                                                                                                                                                                       

   COND       start with a simple process                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review exec                      CPU__unit                   "exec"           , 0                                                                                  s_equal     CPU exec    ( 0) :  -åæ                  -c       -d                                                 
     get      ... review proc                      CPU__unit                   "proc"           , 0                                                                                  s_equal     CPU proc    ( 0) : -     -      -       -u       -s  -n  -                                           
     system   make a test stat file                - - - - - - - - - - - - -   echo ¶14358 (bash) S 14355 -04- -05- -06- -07- -08- -09- -10- -11- -12- 52 2 -15- -16- 20 -18- -19- -20- -21- -22- -23- -24- 4190000 4920000 -27- -28- -29- -30- -31- -32- -33- -34- -35- -36- -37- -38- -39- -40- -41- -42- -43- 7028000 7048000 -46- -47- -48- -49- -50- -51-¶  > /tmp/14358 
     exec     add a proc                           PROC_hook                   &x_proc          , 14358                                                                              i_equal     1                                                                                                    
     exec     parse the stat file                  CPU_detail                  x_proc           , "/tmp/14358"                                                                       i_equal     0                                                                                                    
     get      ... review exec                      CPU__unit                   "exec"           , 0                                                                                  s_equal     CPU exec    ( 0) :  4åbashæ         730000c   20000d                                                 
     get      ... review proc                      CPU__unit                   "proc"           , 0                                                                                  s_equal     CPU proc    ( 0) : 14358 14355  S      52u       2s 20n  -                                           

   COND       attempt on grounded/null proc                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     code     ground the pointer                   - - - - - - - - - - - - -   x_proc = NULL;                                                                                                                                                                                                              
     exec     parse the stat file                  CPU_detail                  x_proc           , "/tmp/14358"                                                                       i_lesser    0                                                                                                    
     exec     parse the stat file                  CPU_detail                  NULL             , "/tmp/14358"                                                                       i_lesser    0                                                                                                    

   COND       attempt on a missing input                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     parse the stat file                  CPU_detail                  x_proc           , "/tmp/99999"                                                                       i_lesser    0                                                                                                    
     exec     parse the stat file                  CPU_detail                  x_proc           , ""                                                                                 i_lesser    0                                                                                                    
     exec     parse the stat file                  CPU_detail                  x_proc           , NULL                                                                               i_lesser    0                                                                                                    

   COND       run an update                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     system   make a test stat file                - - - - - - - - - - - - -   echo ¶14358 (bash) R 14355 -04- -05- -06- -07- -08- -09- -10- -11- -12- 61 5 -15- -16- 18 -18- -19- -20- -21- -22- -23- -24- 4190000 4920000 -27- -28- -29- -30- -31- -32- -33- -34- -35- -36- -37- -38- -39- -40- -41- -42- -43- 7028000 7048000 -46- -47- -48- -49- -50- -51-¶  > /tmp/14358 
     exec     add a proc                           PROC_hook                   &x_proc          , 14358                                                                              i_equal     0                                                                                                    
     exec     parse the stat file                  CPU_detail                  x_proc           , "/tmp/14358"                                                                       i_equal     0                                                                                                    
     get      ... review exec                      CPU__unit                   "exec"           , 0                                                                                  s_equal     CPU exec    ( 0) :  4åbashæ         730000c   20000d                                                 
     get      ... review proc                      CPU__unit                   "proc"           , 0                                                                                  s_equal     CPU proc    ( 0) : 14358 14355  R      61u       5s 18n  -                                           

   COND       verify program teardown purges                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.020))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap-up the program                  PROG__unit_end                                                                                                                    i_equal     0                                                                                                    
     get      review the exec counts               EXEC__unit                  "count"          , 0                                                                                  s_equal     EXEC count       : num=   0, fore=   0, back=   0                                                    
     get      review the exec list                 EXEC__unit                  "list"           , 0                                                                                  s_equal     EXEC list        : num=   0, head=(nil)     , tail=(nil)                                              



