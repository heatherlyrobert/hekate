#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                hekate.h                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (MEM) verify proc/smaps file collection of mem usage               MEM_detail                                                                                            ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       prepare for run                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     initialize the system                PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   tPROC *x_proc = NULL;                                                                                                                                                                                                       
     get      ... exec counts                      EXEC__unit                  "count"          , 0                                                                                  s_equal     EXEC count       : num=   0, fore=   0, back=   0                                                    
     get      ... proc counts                      PROC__unit                  "count"          , 0                                                                                  s_equal     PROC count       : num=   0, fore=   0, back=   0                                                    

   COND       start with a simple process                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review exec                      MEM__unit                   "exec"           , 0                                                                                  s_equal     MEM exec    ( 0) :  -åæ                  -c       -d        -t       -b       -k                                                 
     get      ... review proc                      CPU__unit                   "proc"           , 0                                                                                  s_equal     CPU proc    ( 0) : -     -      -       -u       -s  -n  -                                           
     exec     add a proc                           PROC_hook                   &x_proc          , 14358                                                                              i_equal     1                                                                                                    
     get      ... exec counts                      EXEC__unit                  "count"          , 0                                                                                  s_equal     EXEC count       : num=   0, fore=   0, back=   0                                                    
     get      ... proc counts                      PROC__unit                  "count"          , 0                                                                                  s_equal     PROC count       : num=   1, fore=   1, back=   1                                                    
     exec     parse the stat file                  CPU_detail                  x_proc           , "./testdata/14358_stat_1bash"                                                     i_equal     0                                                                                                    
     get      ... exec counts                      EXEC__unit                  "count"          , 0                                                                                  s_equal     EXEC count       : num=   1, fore=   1, back=   1                                                    
     get      ... proc counts                      PROC__unit                  "count"          , 0                                                                                  s_equal     PROC count       : num=   1, fore=   1, back=   1                                                    
     get      ... review exec                      MEM__unit                   "exec"           , 0                                                                                  s_equal     MEM exec    ( 0) :  4åbashæ            716c      15d        0t       0b       0k                                                 
     get      ... review proc                      CPU__unit                   "proc"           , 0                                                                                  s_equal     CPU proc    ( 0) : 14358 14355  S      52u       2s 20n  -                                           

   COND       collect memory information                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     parse the smaps file                 MEM_detail                  x_proc           , "./testdata/14358_smaps"                                                          i_equal     0                                                                                                    
     get      ... review exec                      MEM__unit                   "exec"           , 0                                                                                  s_equal     MEM exec    ( 0) :  4åbashæ            716c      15d      720t       4b      20k                                                 




   COND       verify program teardown purges                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.020))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     wrap-up the program                  PROG__unit_end                                                                                                                    i_equal     0                                                                                                    
     get      ... exec counts                      EXEC__unit                  "count"          , 0                                                                                  s_equal     EXEC count       : num=   0, fore=   0, back=   0                                                    
     get      ... proc counts                      PROC__unit                  "count"          , 0                                                                                  s_equal     PROC count       : num=   0, fore=   0, back=   0                                                    
